<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grammar Mastery - English by Neo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary-blue: #1a73e8;
            --secondary-blue: #4285f4;
            --light-blue: #e8f0fe;
            --dark-blue: #0d47a1;
            --accent-orange: #ff6b35;
            --accent-green: #34a853;
            --accent-purple: #9c27b0;
            --text-dark: #202124;
            --text-light: #5f6368;
            --white: #ffffff;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            --shadow-strong: 0 20px 40px rgba(0, 0, 0, 0.25);
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e3e7f1 100%);
            color: var(--text-dark);
            line-height: 1.6;
            min-height: 100vh;
        }

        /* Language Switcher */
        .language-switcher {
            position: fixed;
            top: 30px;
            right: 30px;
            z-index: 1000;
            display: flex;
            gap: 10px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 50px;
            padding: 8px;
            box-shadow: var(--shadow);
            border: 2px solid var(--primary-blue);
        }

        .lang-btn {
            padding: 10px 20px;
            border-radius: 30px;
            border: none;
            background: transparent;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-dark);
        }

        .lang-btn.active {
            background: var(--primary-blue);
            color: white;
        }

        .lang-btn:hover:not(.active) {
            background: var(--light-blue);
        }

        /* Header */
        .header-main {
            padding: 30px 0;
            position: sticky;
            top: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            z-index: 900;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 30px;
        }

        .header-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo-wrapper {
            display: flex;
            align-items: center;
            gap: 20px;
            text-decoration: none;
        }

        .logo-3d-container {
            width: 80px;
            height: 80px;
            filter: drop-shadow(0 8px 20px rgba(26, 115, 232, 0.3));
            transition: transform 0.3s ease;
            background: linear-gradient(135deg, var(--primary-blue), var(--dark-blue));
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 36px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .logo-text {
            font-size: 28px;
            font-weight: 800;
            color: var(--text-dark);
        }

        .logo-text span {
            color: var(--primary-blue);
            position: relative;
        }

        .logo-text span::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--accent-orange);
            border-radius: 2px;
        }

        /* Navigation */
        .main-nav {
            display: flex;
            gap: 10px;
        }

        .nav-link {
            padding: 10px 25px;
            text-decoration: none;
            color: var(--text-dark);
            font-weight: 600;
            border-radius: 30px;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            background: var(--light-blue);
            color: var(--primary-blue);
        }

        .nav-link.active {
            background: var(--primary-blue);
            color: white;
            box-shadow: 0 5px 15px rgba(26, 115, 232, 0.3);
        }

        /* Level Selection */
        .level-selection {
            padding: 80px 0 40px;
            text-align: center;
        }

        .level-cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin-top: 50px;
        }

        .level-card {
            background: white;
            border-radius: 25px;
            padding: 40px 30px;
            box-shadow: var(--shadow);
            transition: all 0.4s ease;
            text-align: center;
            border: 3px solid transparent;
        }

        .level-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-strong);
        }

        .level-card.basic {
            border-color: var(--accent-green);
        }

        .level-card.intermediate {
            border-color: var(--accent-orange);
        }

        .level-card.advanced {
            border-color: var(--accent-purple);
        }

        .level-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            color: white;
        }

        .basic .level-icon {
            background: var(--accent-green);
        }

        .intermediate .level-icon {
            background: var(--accent-orange);
        }

        .advanced .level-icon {
            background: var(--accent-purple);
        }

        .level-card h3 {
            font-size: 1.8rem;
            margin-bottom: 15px;
        }

        .level-features {
            list-style: none;
            text-align: left;
            margin: 25px 0;
        }

        .level-features li {
            padding: 8px 0;
            position: relative;
            padding-left: 25px;
        }

        .level-features li::before {
            content: '‚úì';
            position: absolute;
            left: 0;
            color: var(--accent-green);
            font-weight: bold;
        }

        .level-btn {
            display: inline-block;
            padding: 12px 35px;
            background: var(--primary-blue);
            color: white;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            border: 2px solid var(--primary-blue);
        }

        .level-btn:hover {
            background: transparent;
            color: var(--primary-blue);
        }

        /* Lesson Content */
        .lesson-content {
            display: none;
            padding: 60px 0;
        }

        .lesson-content.active {
            display: block;
        }

        .lesson-header {
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-purple));
            color: white;
            padding: 50px;
            border-radius: 25px;
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
        }

        .lesson-header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: float 20s linear infinite;
        }

        .back-to-levels {
            display: inline-block;
            padding: 10px 25px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border-radius: 25px;
            text-decoration: none;
            margin-bottom: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        .back-to-levels:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .lessons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .lesson-card {
            background: white;
            border-radius: 20px;
            padding: 35px;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border: 2px solid transparent;
        }

        .lesson-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-strong);
            border-color: var(--primary-blue);
        }

        .lesson-number {
            font-size: 14px;
            font-weight: 600;
            color: var(--primary-blue);
            margin-bottom: 15px;
            display: block;
        }

        .lesson-card h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--text-dark);
        }

        .lesson-card p {
            color: var(--text-light);
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .lesson-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            font-size: 14px;
            color: var(--text-light);
        }

        .lesson-time {
            padding: 5px 15px;
            background: var(--light-blue);
            border-radius: 15px;
            color: var(--primary-blue);
        }

        .start-lesson-btn {
            display: inline-block;
            padding: 10px 25px;
            background: var(--primary-blue);
            color: white;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            border: 2px solid var(--primary-blue);
        }

        .start-lesson-btn:hover {
            background: transparent;
            color: var(--primary-blue);
        }

        /* Progress Section */
        .progress-section {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin: 60px 0;
            box-shadow: var(--shadow);
        }

        .progress-bar {
            height: 12px;
            background: var(--light-blue);
            border-radius: 6px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-blue), var(--accent-green));
            border-radius: 6px;
            transition: width 1s ease;
        }

        /* Quiz Section */
        .quiz-section {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin: 60px 0;
            box-shadow: var(--shadow);
            display: none;
        }

        .quiz-section.active {
            display: block;
        }

        .quiz-question {
            margin-bottom: 30px;
        }

        .quiz-options {
            display: grid;
            gap: 15px;
            margin: 30px 0;
        }

        .quiz-option {
            padding: 15px 20px;
            background: var(--light-blue);
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .quiz-option:hover {
            background: #dbeafe;
        }

        .quiz-option.selected {
            background: var(--primary-blue);
            color: white;
            border-color: var(--primary-blue);
        }

        .quiz-option.correct {
            background: var(--accent-green);
            color: white;
            border-color: var(--accent-green);
        }

        .quiz-option.wrong {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }

        .quiz-feedback {
            display: none;
            padding: 20px;
            background: var(--light-blue);
            border-radius: 15px;
            margin: 20px 0;
        }

        .quiz-feedback.active {
            display: block;
        }

        .quiz-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
        }

        .quiz-btn {
            padding: 12px 30px;
            background: var(--primary-blue);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .quiz-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .quiz-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Footer */
        .footer-main {
            background: linear-gradient(135deg, var(--text-dark), #000);
            color: var(--white);
            padding: 60px 0 40px;
            margin-top: 100px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 50px;
        }

        .footer-section h3 {
            font-size: 1.3rem;
            margin-bottom: 25px;
            color: var(--secondary-blue);
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 15px;
        }

        .footer-links a {
            color: #aaa;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: var(--secondary-blue);
        }

        .copyright {
            text-align: center;
            padding-top: 40px;
            margin-top: 40px;
            border-top: 1px solid #333;
            color: #777;
            font-size: 0.9rem;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .level-cards {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .lessons-grid {
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                gap: 20px;
            }
            
            .level-cards {
                grid-template-columns: 1fr;
            }
            
            .main-nav {
                flex-wrap: wrap;
                justify-content: center;
            }
        }

        /* Animations */
        @keyframes float {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Persian Support */
        body[dir="rtl"] {
            text-align: right;
        }

        body[dir="rtl"] .logo-wrapper {
            flex-direction: row-reverse;
        }

        body[dir="rtl"] .level-features li {
            padding-left: 0;
            padding-right: 25px;
        }

        body[dir="rtl"] .level-features li::before {
            left: auto;
            right: 0;
        }
    </style>
</head>
<body data-page="grammar">
    <!-- Language Switcher -->
    <div class="language-switcher">
        <button class="lang-btn active" data-lang="en">English</button>
        <button class="lang-btn" data-lang="fa">ŸÅÿßÿ±ÿ≥€å</button>
    </div>

    <!-- Header -->
    <header class="header-main">
        <div class="container">
            <div class="header-container">
                <a href="index.html" class="logo-wrapper">
                    <div class="logo-3d-container">EN</div>
                    <div class="logo-text">English by <span>Neo</span></div>
                </a>
                
                <nav class="main-nav">
                    <a href="index.html" class="nav-link">Home</a>
                    <a href="grammar.html" class="nav-link active">Grammar</a>
                    <a href="vocabulary.html" class="nav-link">Vocabulary</a>
                    <a href="pronunciation.html" class="nav-link">Pronunciation</a>
                    <a href="voice-check.html" class="nav-link">Voice Check</a>
                    <a href="placement-tests.html" class="nav-link">Placement Tests</a>
                    <a href="ielts.html" class="nav-link">IELTS</a>
                    <a href="toefl.html" class="nav-link">TOEFL</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Level Selection -->
    <section class="level-selection" id="levelSelection">
        <div class="container">
            <h2 id="level-title">Choose Your Grammar Level</h2>
            <p id="level-subtitle">Select the level that matches your current English proficiency</p>
            
            <div class="level-cards">
                <!-- Basic Level -->
                <div class="level-card basic">
                    <div class="level-icon">
                        <i class="fas fa-seedling"></i>
                    </div>
                    <h3 id="basic-title">Basic</h3>
                    <p id="basic-desc">For beginners starting their English journey</p>
                    
                    <ul class="level-features" id="basic-features">
                        <li>Simple present & past tenses</li>
                        <li>Basic sentence structure</li>
                        <li>Everyday conversations</li>
                        <li>Essential grammar rules</li>
                        <li>Beginner vocabulary</li>
                    </ul>
                    
                    <div class="lesson-stats">
                        <span>‚è±Ô∏è <span id="basic-time">15</span> hours</span>
                        <span>üìö <span id="basic-lessons">25</span> lessons</span>
                    </div>
                    
                    <a href="#basicLessons" class="level-btn" data-level="basic" id="basic-btn">Start Basic Level</a>
                </div>
                
                <!-- Intermediate Level -->
                <div class="level-card intermediate">
                    <div class="level-icon">
                        <i class="fas fa-tree"></i>
                    </div>
                    <h3 id="intermediate-title">Intermediate</h3>
                    <p id="intermediate-desc">For learners with basic understanding</p>
                    
                    <ul class="level-features" id="intermediate-features">
                        <li>All verb tenses</li>
                        <li>Conditional sentences</li>
                        <li>Reported speech</li>
                        <li>Complex sentences</li>
                        <li>Idiomatic expressions</li>
                    </ul>
                    
                    <div class="lesson-stats">
                        <span>‚è±Ô∏è <span id="intermediate-time">25</span> hours</span>
                        <span>üìö <span id="intermediate-lessons">35</span> lessons</span>
                    </div>
                    
                    <a href="#intermediateLessons" class="level-btn" data-level="intermediate" id="intermediate-btn">Start Intermediate Level</a>
                </div>
                
                <!-- Advanced Level -->
                <div class="level-card advanced">
                    <div class="level-icon">
                        <i class="fas fa-mountain"></i>
                    </div>
                    <h3 id="advanced-title">Advanced</h3>
                    <p id="advanced-desc">For IELTS/TOEFL preparation and fluency</p>
                    
                    <ul class="level-features" id="advanced-features">
                        <li>Advanced grammar structures</li>
                        <li>Academic writing</li>
                        <li>Formal speech patterns</li>
                        <li>Exam strategies</li>
                        <li>Native-level proficiency</li>
                    </ul>
                    
                    <div class="lesson-stats">
                        <span>‚è±Ô∏è <span id="advanced-time">40</span> hours</span>
                        <span>üìö <span id="advanced-lessons">50</span> lessons</span>
                    </div>
                    
                    <a href="#advancedLessons" class="level-btn" data-level="advanced" id="advanced-btn">Start Advanced Level</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Basic Level Content -->
    <section class="lesson-content" id="basicLessons">
        <div class="container">
            <div class="lesson-header">
                <a href="#levelSelection" class="back-to-levels" id="back-basic">
                    ‚Üê Back to Levels
                </a>
                <h2 id="basic-level-title">Basic Grammar Level</h2>
                <p id="basic-level-desc">Master essential grammar for everyday communication</p>
            </div>
            
            <!-- Progress Section -->
            <div class="progress-section">
                <h3 id="progress-basic-title">Your Progress</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="basic-progress" style="width: 0%"></div>
                </div>
                <p id="progress-basic-text">0% Complete ‚Ä¢ 0/25 Lessons</p>
            </div>
            
            <!-- Lessons Grid -->
            <div class="lessons-grid" id="basic-lessons-grid">
                <!-- Lessons will be loaded here by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Intermediate Level Content -->
    <section class="lesson-content" id="intermediateLessons">
        <div class="container">
            <div class="lesson-header">
                <a href="#levelSelection" class="back-to-levels" id="back-intermediate">
                    ‚Üê Back to Levels
                </a>
                <h2 id="intermediate-level-title">Intermediate Grammar Level</h2>
                <p id="intermediate-level-desc">Build complex sentences and express detailed thoughts</p>
            </div>
            
            <!-- Progress Section -->
            <div class="progress-section">
                <h3 id="progress-intermediate-title">Your Progress</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="intermediate-progress" style="width: 0%"></div>
                </div>
                <p id="progress-intermediate-text">0% Complete ‚Ä¢ 0/35 Lessons</p>
            </div>
            
            <!-- Lessons Grid -->
            <div class="lessons-grid" id="intermediate-lessons-grid">
                <!-- Lessons will be loaded here by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Advanced Level Content -->
    <section class="lesson-content" id="advancedLessons">
        <div class="container">
            <div class="lesson-header">
                <a href="#levelSelection" class="back-to-levels" id="back-advanced">
                    ‚Üê Back to Levels
                </a>
                <h2 id="advanced-level-title">Advanced Grammar Level</h2>
                <p id="advanced-level-desc">Achieve native-like fluency and academic excellence</p>
            </div>
            
            <!-- Progress Section -->
            <div class="progress-section">
                <h3 id="progress-advanced-title">Your Progress</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="advanced-progress" style="width: 0%"></div>
                </div>
                <p id="progress-advanced-text">0% Complete ‚Ä¢ 0/50 Lessons</p>
            </div>
            
            <!-- Lessons Grid -->
            <div class="lessons-grid" id="advanced-lessons-grid">
                <!-- Lessons will be loaded here by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Quiz Section -->
    <section class="quiz-section" id="quizSection">
        <div class="container">
            <div class="lesson-header">
                <a href="#" class="back-to-levels" id="back-to-lesson">
                    ‚Üê Back to Lesson
                </a>
                <h2 id="quiz-title">Grammar Quiz</h2>
                <p id="quiz-subtitle">Test your understanding of the lesson</p>
            </div>
            
            <div id="quiz-content">
                <!-- Quiz content will be loaded here -->
            </div>
            
            <div class="quiz-navigation">
                <button class="quiz-btn" id="prev-question" disabled>Previous</button>
                <div>
                    <span id="question-counter">Question 1 of 5</span>
                </div>
                <button class="quiz-btn" id="next-question">Next Question</button>
                <button class="quiz-btn" id="submit-quiz" style="display: none;">Submit Quiz</button>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer-main">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="logo-text" style="color: white; margin-bottom: 20px;">English by <span>Neo</span></div>
                    <p id="footer-description">Your journey to English fluency starts here. Join our community of successful learners today!</p>
                </div>
                
                <div class="footer-section">
                    <h3 id="footer-links-title">Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="placement-tests.html">Placement Test</a></li>
                        <li><a href="voice-check.html">Voice Analysis</a></li>
                        <li><a href="#">Contact Support</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3 id="footer-categories-title">Categories</h3>
                    <ul class="footer-links">
                        <li><a href="grammar.html">Grammar</a></li>
                        <li><a href="vocabulary.html">Vocabulary</a></li>
                        <li><a href="pronunciation.html">Pronunciation</a></li>
                        <li><a href="ielts.html">IELTS Preparation</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3 id="footer-contact-title">Contact Us</h3>
                    <ul class="footer-links">
                        <li><a href="mailto:support@englishbyneo.com">support@englishbyneo.com</a></li>
                        <li><a href="#">Help Center</a></li>
                        <li><a href="#">FAQ</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                <p id="copyright-text">¬© 2023 English by Neo. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Grammar Lesson Data - Comprehensive content for all levels
        const grammarData = {
            en: {
                // Basic Level Lessons
                basic: [
                    {
                        id: 1,
                        title: "Present Simple Tense",
                        description: "Learn to talk about habits, routines, and general truths",
                        content: `
                            <h3>Present Simple Tense</h3>
                            <p>The present simple is used for:</p>
                            <ul>
                                <li>Habits and routines: <em>I wake up at 7 AM every day.</em></li>
                                <li>General truths: <em>The sun rises in the east.</em></li>
                                <li>Permanent situations: <em>She works in a bank.</em></li>
                            </ul>
                            
                            <h4>Structure:</h4>
                            <p><strong>Affirmative:</strong> Subject + verb (add 's' for he/she/it)</p>
                            <p><strong>Negative:</strong> Subject + do/does + not + verb</p>
                            <p><strong>Question:</strong> Do/Does + subject + verb</p>
                            
                            <div class="example-box">
                                <h4>Examples:</h4>
                                <p>‚úÖ <strong>Correct:</strong> He plays football every weekend.</p>
                                <p>‚úÖ <strong>Correct:</strong> They don't like coffee.</p>
                                <p>‚ùå <strong>Incorrect:</strong> He play football every weekend.</p>
                            </div>
                        `,
                        examples: [
                            "I study English every day.",
                            "She doesn't eat meat.",
                            "Do you live in London?"
                        ],
                        time: "15 min",
                        difficulty: "beginner"
                    },
                    {
                        id: 2,
                        title: "Past Simple Tense",
                        description: "Learn to talk about completed actions in the past",
                        content: `
                            <h3>Past Simple Tense</h3>
                            <p>Used for completed actions at a specific time in the past.</p>
                            
                            <h4>Regular Verbs:</h4>
                            <p>Add -ed to the base verb:</p>
                            <ul>
                                <li>work ‚Üí worked</li>
                                <li>play ‚Üí played</li>
                                <li>study ‚Üí studied</li>
                            </ul>
                            
                            <h4>Irregular Verbs:</h4>
                            <p>Must be memorized:</p>
                            <ul>
                                <li>go ‚Üí went</li>
                                <li>eat ‚Üí ate</li>
                                <li>see ‚Üí saw</li>
                            </ul>
                            
                            <div class="example-box">
                                <h4>Usage Examples:</h4>
                                <p>‚úÖ I <strong>visited</strong> Paris last year.</p>
                                <p>‚úÖ She <strong>didn't go</strong> to school yesterday.</p>
                                <p>‚úÖ <strong>Did</strong> you <strong>watch</strong> the movie?</p>
                            </div>
                        `,
                        examples: [
                            "We finished the project yesterday.",
                            "He didn't call me last night.",
                            "Where did you go on vacation?"
                        ],
                        time: "20 min",
                        difficulty: "beginner"
                    },
                    {
                        id: 3,
                        title: "Basic Sentence Structure",
                        description: "Learn Subject + Verb + Object pattern",
                        content: `
                            <h3>Basic Sentence Structure</h3>
                            <p>Every complete sentence needs a subject and a verb.</p>
                            
                            <h4>SVO Pattern:</h4>
                            <p><strong>Subject</strong> + <strong>Verb</strong> + <strong>Object</strong></p>
                            
                            <div class="example-box">
                                <h4>Correct Sentences:</h4>
                                <p>1. <strong>I</strong> (S) <strong>love</strong> (V) <strong>music</strong> (O).</p>
                                <p>2. <strong>She</strong> (S) <strong>reads</strong> (V) <strong>books</strong> (O).</p>
                                <p>3. <strong>They</strong> (S) <strong>play</strong> (V) <strong>soccer</strong> (O).</p>
                            </div>
                            
                            <h4>Common Mistakes:</h4>
                            <p>‚ùå No subject: "Is raining." ‚Üí ‚úÖ "It is raining."</p>
                            <p>‚ùå No verb: "She happy." ‚Üí ‚úÖ "She is happy."</p>
                        `,
                        examples: [
                            "The cat sleeps on the sofa.",
                            "My brother studies engineering.",
                            "We watch movies on weekends."
                        ],
                        time: "12 min",
                        difficulty: "beginner"
                    },
                    {
                        id: 4,
                        title: "Articles: A, An, The",
                        description: "Learn when to use definite and indefinite articles",
                        content: `
                            <h3>Articles in English</h3>
                            <p>Articles are small words but very important for correct English.</p>
                            
                            <h4>A/An (Indefinite Articles):</h4>
                            <ul>
                                <li>Use <strong>a</strong> before consonant sounds: a book, a university</li>
                                <li>Use <strong>an</strong> before vowel sounds: an apple, an hour</li>
                                <li>Used for non-specific things: I need <em>a</em> pen.</li>
                            </ul>
                            
                            <h4>The (Definite Article):</h4>
                            <ul>
                                <li>Used for specific things: Pass me <em>the</em> salt.</li>
                                <li>When both speakers know what's being discussed</li>
                                <li>With unique things: the sun, the moon, the internet</li>
                            </ul>
                            
                            <div class="example-box">
                                <h4>Practice Sentences:</h4>
                                <p>‚úÖ I saw <strong>a</strong> movie yesterday. (first mention)</p>
                                <p>‚úÖ <strong>The</strong> movie was excellent. (specific movie)</p>
                                <p>‚úÖ She is <strong>an</strong> honest person. (vowel sound)</p>
                            </div>
                        `,
                        examples: [
                            "I bought a new car.",
                            "Can you open the window?",
                            "He's an excellent teacher."
                        ],
                        time: "18 min",
                        difficulty: "beginner"
                    },
                    {
                        id: 5,
                        title: "Plural Nouns",
                        description: "Learn how to make nouns plural in English",
                        content: `
                            <h3>Making Nouns Plural</h3>
                            <p>Most nouns add -s, but there are important exceptions.</p>
                            
                            <h4>Regular Plurals:</h4>
                            <ul>
                                <li>Add -s: cat ‚Üí cats, book ‚Üí books</li>
                                <li>Add -es after -s, -sh, -ch, -x: box ‚Üí boxes, watch ‚Üí watches</li>
                                <li>Change -y to -ies: baby ‚Üí babies, city ‚Üí cities</li>
                            </ul>
                            
                            <h4>Irregular Plurals:</h4>
                            <ul>
                                <li>child ‚Üí children</li>
                                <li>foot ‚Üí feet</li>
                                <li>tooth ‚Üí teeth</li>
                                <li>mouse ‚Üí mice</li>
                                <li>person ‚Üí people</li>
                            </ul>
                            
                            <div class="example-box">
                                <h4>Correct Usage:</h4>
                                <p>‚úÖ I have two <strong>sisters</strong>.</p>
                                <p>‚úÖ There are many <strong>children</strong> in the park.</p>
                                <p>‚ùå I have three <strong>childs</strong>. ‚Üí ‚úÖ three <strong>children</strong></p>
                            </div>
                        `,
                        examples: [
                            "The students are in class.",
                            "These boxes are heavy.",
                            "How many people were there?"
                        ],
                        time: "15 min",
                        difficulty: "beginner"
                    }
                ],
                
                // Intermediate Level Lessons
                intermediate: [
                    {
                        id: 1,
                        title: "Present Perfect Tense",
                        description: "Connect past actions to present results",
                        content: `
                            <h3>Present Perfect Tense</h3>
                            <p>Used for actions that happened at an unspecified time or have present relevance.</p>
                            
                            <h4>Structure:</h4>
                            <p>Subject + have/has + past participle</p>
                            
                            <h4>Common Uses:</h4>
                            <ul>
                                <li><strong>Unspecified time:</strong> I have visited Japan.</li>
                                <li><strong>Experience:</strong> She has never tried sushi.</li>
                                <li><strong>Recent actions:</strong> They have just arrived.</li>
                                <li><strong>Continuing actions:</strong> I have lived here for 5 years.</li>
                            </ul>
                            
                            <div class="example-box">
                                <h4>Present Perfect vs Past Simple:</h4>
                                <p>‚úÖ I <strong>have finished</strong> my homework. (present result: now free)</p>
                                <p>‚úÖ I <strong>finished</strong> my homework at 8 PM. (specific time)</p>
                                <p>‚úÖ She <strong>has lived</strong> here since 2020. (still living here)</p>
                                <p>‚úÖ She <strong>lived</strong> here in 2020. (not anymore)</p>
                            </div>
                        `,
                        examples: [
                            "I have studied English for three years.",
                            "Have you ever been to Paris?",
                            "He hasn't finished his work yet."
                        ],
                        time: "25 min",
                        difficulty: "intermediate"
                    },
                    {
                        id: 2,
                        title: "Conditional Sentences",
                        description: "Learn 'if' clauses for hypothetical situations",
                        content: `
                            <h3>Conditional Sentences</h3>
                            <p>Used to talk about hypothetical situations and their consequences.</p>
                            
                            <h4>Zero Conditional (General Truths):</h4>
                            <p>If + present simple, present simple</p>
                            <p><em>If you heat water to 100¬∞C, it boils.</em></p>
                            
                            <h4>First Conditional (Real Possibility):</h4>
                            <p>If + present simple, will + verb</p>
                            <p><em>If it rains, we will cancel the picnic.</em></p>
                            
                            <h4>Second Conditional (Unreal Present):</h4>
                            <p>If + past simple, would + verb</p>
                            <p><em>If I had a million dollars, I would travel the world.</em></p>
                            
                            <div class="example-box">
                                <h4>Practice:</h4>
                                <p>1. If you ______ (study) hard, you ______ (pass) the exam.</p>
                                <p>2. If I ______ (be) you, I ______ (take) that job.</p>
                                <p>3. Water ______ (freeze) if the temperature ______ (drop) below 0¬∞C.</p>
                            </div>
                        `,
                        examples: [
                            "If I see him, I'll tell him.",
                            "If I were rich, I would buy a yacht.",
                            "If you mix blue and yellow, you get green."
                        ],
                        time: "30 min",
                        difficulty: "intermediate"
                    },
                    {
                        id: 3,
                        title: "Reported Speech",
                        description: "Learn to report what someone else said",
                        content: `
                            <h3>Reported Speech (Indirect Speech)</h3>
                            <p>Used to tell someone what another person said without using their exact words.</p>
                            
                            <h4>Tense Changes:</h4>
                            <ul>
                                <li>Present Simple ‚Üí Past Simple: "I like coffee." ‚Üí He said he liked coffee.</li>
                                <li>Present Continuous ‚Üí Past Continuous: "I am reading." ‚Üí She said she was reading.</li>
                                <li>Will ‚Üí Would: "I will help." ‚Üí He said he would help.</li>
                                <li>Can ‚Üí Could: "I can swim." ‚Üí She said she could swim.</li>
                            </ul>
                            
                            <h4>Other Changes:</h4>
                            <ul>
                                <li>this ‚Üí that</li>
                                <li>here ‚Üí there</li>
                                <li>now ‚Üí then</li>
                                <li>today ‚Üí that day</li>
                            </ul>
                            
                            <div class="example-box">
                                <h4>Direct to Reported:</h4>
                                <p>Direct: "I love this movie."</p>
                                <p>Reported: She said she loved that movie.</p>
                                
                                <p>Direct: "I will call you tomorrow."</p>
                                <p>Reported: He said he would call me the next day.</p>
                            </div>
                        `,
                        examples: [
                            "She said she was tired.",
                            "He told me he had finished the work.",
                            "They said they would come early."
                        ],
                        time: "28 min",
                        difficulty: "intermediate"
                    },
                    {
                        id: 4,
                        title: "Relative Clauses",
                        description: "Learn to use who, which, that to add information",
                        content: `
                            <h3>Relative Clauses</h3>
                            <p>Used to give more information about a noun without starting a new sentence.</p>
                            
                            <h4>Relative Pronouns:</h4>
                            <ul>
                                <li><strong>who</strong> - for people: The man who called is my brother.</li>
                                <li><strong>which</strong> - for things: The book which I read was interesting.</li>
                                <li><strong>that</strong> - for people or things: The car that I bought is red.</li>
                                <li><strong>whose</strong> - for possession: The woman whose car was stolen called the police.</li>
                                <li><strong>where</strong> - for places: This is the house where I was born.</li>
                            </ul>
                            
                            <h4>Defining vs Non-defining:</h4>
                            <p><strong>Defining</strong> (essential information, no commas):</p>
                            <p>The students who study hard will pass.</p>
                            
                            <p><strong>Non-defining</strong> (extra information, with commas):</p>
                            <p>My brother, who lives in London, is visiting us.</p>
                        `,
                        examples: [
                            "The woman who teaches us is very kind.",
                            "This is the book that changed my life.",
                            "My friend, whose father is a doctor, is coming over."
                        ],
                        time: "35 min",
                        difficulty: "intermediate"
                    },
                    {
                        id: 5,
                        title: "Passive Voice",
                        description: "Learn when and how to use passive constructions",
                        content: `
                            <h3>Passive Voice</h3>
                            <p>Used when the focus is on the action, not who performed it.</p>
                            
                            <h4>Structure:</h4>
                            <p>Subject + be + past participle + (by + agent)</p>
                            
                            <h4>When to Use Passive:</h4>
                            <ul>
                                <li>When the doer is unknown: The window was broken.</li>
                                <li>When the doer is unimportant: English is spoken here.</li>
                                <li>To be more formal: Mistakes were made.</li>
                                <li>In scientific writing: The experiment was conducted.</li>
                            </ul>
                            
                            <h4>Tense Changes:</h4>
                            <ul>
                                <li>Present Simple: is/are + past participle</li>
                                <li>Past Simple: was/were + past participle</li>
                                <li>Present Perfect: has/have been + past participle</li>
                                <li>Future: will be + past participle</li>
                            </ul>
                            
                            <div class="example-box">
                                <h4>Active to Passive:</h4>
                                <p>Active: The chef cooks the meal.</p>
                                <p>Passive: The meal is cooked by the chef.</p>
                                
                                <p>Active: They built this house in 1990.</p>
                                <p>Passive: This house was built in 1990.</p>
                            </div>
                        `,
                        examples: [
                            "The letter was written yesterday.",
                            "English is taught in many countries.",
                            "The project will be completed next week."
                        ],
                        time: "32 min",
                        difficulty: "intermediate"
                    }
                ],
                
                // Advanced Level Lessons
                advanced: [
                    {
                        id: 1,
                        title: "Inversion for Emphasis",
                        description: "Advanced sentence structures for formal writing",
                        content: `
                            <h3>Inversion for Emphasis</h3>
                            <p>Used in formal English to add emphasis or in conditional sentences.</p>
                            
                            <h4>Types of Inversion:</h4>
                            
                            <h5>1. Negative Adverbs at the Beginning:</h5>
                            <p>Never have I seen such beauty.</p>
                            <p>Rarely do we encounter such cases.</p>
                            <p>Seldom has there been a better opportunity.</p>
                            
                            <h5>2. Conditional Inversion (Formal):</h5>
                            <p>Normal: If I had known, I would have helped.</p>
                            <p>Inversion: Had I known, I would have helped.</p>
                            
                            <p>Normal: If you should need anything, call me.</p>
                            <p>Inversion: Should you need anything, call me.</p>
                            
                            <h5>3. "So" and "Such" for Emphasis:</h5>
                            <p>Normal: The view was so beautiful that I took a photo.</p>
                            <p>Inversion: So beautiful was the view that I took a photo.</p>
                            
                            <div class="example-box">
                                <h4>IELTS/TOEFL Examples:</h4>
                                <p>‚úÖ <strong>Not only</strong> does she speak French, <strong>but</strong> she also speaks Japanese.</p>
                                <p>‚úÖ <strong>Under no circumstances</strong> should you reveal this information.</p>
                                <p>‚úÖ <strong>Little</strong> did they know what was about to happen.</p>
                            </div>
                        `,
                        examples: [
                            "Never before have I witnessed such dedication.",
                            "Had I been informed earlier, I could have taken action.",
                            "So compelling was the evidence that the jury immediately reached a verdict."
                        ],
                        time: "40 min",
                        difficulty: "advanced"
                    },
                    {
                        id: 2,
                        title: "Cleft Sentences",
                        description: "Advanced structures for focusing on specific information",
                        content: `
                            <h3>Cleft Sentences</h3>
                            <p>Used to emphasize one part of a sentence by splitting it into two clauses.</p>
                            
                            <h4>1. It-cleft Sentences:</h4>
                            <p><strong>Structure:</strong> It + be + emphasized part + that/who clause</p>
                            <p>Normal: John gave Mary the book yesterday.</p>
                            <p>Emphasis on subject: <strong>It was John</strong> who gave Mary the book yesterday.</p>
                            <p>Emphasis on object: <strong>It was the book</strong> that John gave Mary yesterday.</p>
                            <p>Emphasis on time: <strong>It was yesterday</strong> that John gave Mary the book.</p>
                            
                            <h4>2. Wh-cleft Sentences (Pseudo-cleft):</h4>
                            <p><strong>Structure:</strong> What/All + clause + be + emphasized part</p>
                            <p>Normal: I need a good night's sleep.</p>
                            <p>What I need is a good night's sleep.</p>
                            <p>What happened was that the system crashed.</p>
                            
                            <h4>3. The thing that/What... is/was...</h4>
                            <p>The thing that surprised me was his honesty.</p>
                            <p>What matters most is your health.</p>
                            
                            <div class="example-box">
                                <h4>Academic Writing Examples:</h4>
                                <p>‚úÖ <strong>It is precisely this lack of evidence</strong> that calls the theory into question.</p>
                                <p>‚úÖ <strong>What the researchers discovered</strong> was a previously unknown species.</p>
                                <p>‚úÖ <strong>The reason why the experiment failed</strong> was inadequate preparation.</p>
                            </div>
                        `,
                        examples: [
                            "It was in Paris that they first met.",
                            "What we need to consider is the long-term impact.",
                            "The thing that distinguishes this approach is its simplicity."
                        ],
                        time: "45 min",
                        difficulty: "advanced"
                    },
                    {
                        id: 3,
                        title: "Participle Clauses",
                        description: "Advanced reduced relative clauses for conciseness",
                        content: `
                            <h3>Participle Clauses</h3>
                            <p>Used to make writing more concise by reducing adverb or relative clauses.</p>
                            
                            <h4>1. Present Participle Clauses (-ing):</h4>
                            <p>Used to replace:</p>
                            <ul>
                                <li>Active relative clauses: The man <strong>who is sitting</strong> there ‚Üí The man <strong>sitting</strong> there</li>
                                <li>Time clauses: <strong>After I finished</strong> my work ‚Üí <strong>Having finished</strong> my work</li>
                                <li>Reason clauses: <strong>Because I knew</strong> the answer ‚Üí <strong>Knowing</strong> the answer</li>
                            </ul>
                            
                            <h4>2. Past Participle Clauses (-ed/3rd form):</h4>
                            <p>Used to replace passive constructions:</p>
                            <p>The book <strong>which was written</strong> in 1920 ‚Üí The book <strong>written</strong> in 1920</p>
                            <p><strong>When it is viewed</strong> from this angle ‚Üí <strong>Viewed</strong> from this angle</p>
                            
                            <h4>3. Perfect Participle Clauses:</h4>
                            <p>Having + past participle (shows completed action before main clause)</p>
                            <p><strong>After she had graduated</strong>, she got a job ‚Üí <strong>Having graduated</strong>, she got a job</p>
                            
                            <div class="example-box">
                                <h4>Advanced Usage:</h4>
                                <p>‚úÖ <strong>Considering</strong> the circumstances, the results are remarkable.</p>
                                <p>‚úÖ <strong>Based on</strong> the data collected, we can draw several conclusions.</p>
                                <p>‚úÖ <strong>Having been warned</strong> about the dangers, they proceeded with caution.</p>
                            </div>
                        `,
                        examples: [
                            "Not knowing what to do, I called for help.",
                            "The theory, developed over decades, revolutionized the field.",
                            "Having completed the project ahead of schedule, the team celebrated."
                        ],
                        time: "50 min",
                        difficulty: "advanced"
                    },
                    {
                        id: 4,
                        title: "Hedging Language",
                        description: "Academic language for expressing caution and probability",
                        content: `
                            <h3>Hedging Language in Academic Writing</h3>
                            <p>Used to express caution, probability, or to soften claims in formal writing.</p>
                            
                            <h4>1. Modal Verbs for Probability:</h4>
                            <ul>
                                <li><strong>May/might/could:</strong> It may be possible that...</li>
                                <li><strong>Appears/seems to:</strong> This appears to contradict...</li>
                                <li><strong>Tends to:</strong> The data tends to support...</li>
                            </ul>
                            
                            <h4>2. Introductory Phrases:</h4>
                            <ul>
                                <li>It could be argued that...</li>
                                <li>It seems likely that...</li>
                                <li>There is evidence to suggest that...</li>
                                <li>One possibility is that...</li>
                            </ul>
                            
                            <h4>3. Verbs of Tentativeness:</h4>
                            <ul>
                                <li>suggest ‚Üí The results suggest a correlation</li>
                                <li>indicate ‚Üí This indicates a possible connection</li>
                                <li>appear ‚Üí It appears that the hypothesis is correct</li>
                                <li>seem ‚Üí This seems to confirm our theory</li>
                            </ul>
                            
                            <h4>4. Adverbs of Frequency/Probability:</h4>
                            <p>generally, usually, often, frequently, sometimes, occasionally, rarely</p>
                            
                            <div class="example-box">
                                <h4>IELTS Writing Examples:</h4>
                                <p>‚úÖ <strong>It could be argued that</strong> globalization has both positive and negative effects.</p>
                                <p>‚úÖ <strong>The evidence seems to suggest that</strong> climate change is accelerating.</p>
                                <p>‚úÖ <strong>This would appear to indicate</strong> a need for further research.</p>
                            </div>
                        `,
                        examples: [
                            "It may be concluded that further investigation is warranted.",
                            "The results tend to support the initial hypothesis.",
                            "There appears to be a correlation between these variables."
                        ],
                        time: "38 min",
                        difficulty: "advanced"
                    },
                    {
                        id: 5,
                        title: "Noun Phrases & Nominalization",
                        description: "Advanced noun-based structures for academic writing",
                        content: `
                            <h3>Noun Phrases and Nominalization</h3>
                            <p>Transforming verbs and adjectives into nouns to create more formal, dense academic prose.</p>
                            
                            <h4>1. Nominalization Examples:</h4>
                            <ul>
                                <li>Verb ‚Üí Noun: analyze ‚Üí analysis, develop ‚Üí development</li>
                                <li>Adjective ‚Üí Noun: important ‚Üí importance, different ‚Üí difference</li>
                                <li>Verb ‚Üí Noun (process): investigate ‚Üí investigation, discover ‚Üí discovery</li>
                            </ul>
                            
                            <h4>2. Complex Noun Phrases:</h4>
                            <p>Determiner + Premodifier(s) + Head Noun + Postmodifier</p>
                            <p><strong>The recent significant increase</strong> in global temperatures</p>
                            <p><strong>An extensive review</strong> of the available literature</p>
                            
                            <h4>3. Benefits of Nominalization:</h4>
                            <ul>
                                <li>More formal tone</li>
                                <li>Higher information density</li>
                                <li>Objective, impersonal style</li>
                                <li>Common in scientific/academic writing</li>
                            </ul>
                            
                            <h4>4. Common Patterns:</h4>
                            <ul>
                                <li>The <strong>development</strong> of new technologies</li>
                                <li>An <strong>analysis</strong> of the results</li>
                                <li>The <strong>implementation</strong> of these policies</li>
                                <li>A <strong>comparison</strong> between the two methods</li>
                            </ul>
                            
                            <div class="example-box">
                                <h4>Transformation Examples:</h4>
                                <p>Simple: They analyzed the data carefully.</p>
                                <p>Nominalized: A careful <strong>analysis</strong> of the data was conducted.</p>
                                
                                <p>Simple: The company developed the product quickly.</p>
                                <p>Nominalized: The rapid <strong>development</strong> of the product...</p>
                                
                                <p>Simple: Researchers investigated the phenomenon.</p>
                                <p>Nominalized: An <strong>investigation</strong> into the phenomenon was undertaken.</p>
                            </div>
                        `,
                        examples: [
                            "The examination of these factors reveals interesting patterns.",
                            "A comprehensive understanding of the issue requires further study.",
                            "The implementation of such measures would necessitate significant resources."
                        ],
                        time: "55 min",
                        difficulty: "advanced"
                    }
                ]
            },
            
            fa: {
                // Persian translations for all lessons
                basic: [
                    {
                        id: 1,
                        title: "ÿ≤ŸÖÿßŸÜ ÿ≠ÿßŸÑ ÿ≥ÿßÿØŸá",
                        description: "€åÿßÿØ⁄Ø€åÿ±€å ÿµÿ≠ÿ®ÿ™ ÿØÿ±ÿ®ÿßÿ±Ÿá ÿπÿßÿØÿßÿ™ÿå ÿ±ŸàÿßŸÑ‚ÄåŸáÿß Ÿà ÿ≠ŸÇÿß€åŸÇ ⁄©ŸÑ€å",
                        content: `
                            <h3>ÿ≤ŸÖÿßŸÜ ÿ≠ÿßŸÑ ÿ≥ÿßÿØŸá</h3>
                            <p>ÿ≤ŸÖÿßŸÜ ÿ≠ÿßŸÑ ÿ≥ÿßÿØŸá ÿ®ÿ±ÿß€å ŸÖŸàÿßÿ±ÿØ ÿ≤€åÿ± ÿßÿ≥ÿ™ŸÅÿßÿØŸá ŸÖ€å‚Äåÿ¥ŸàÿØ:</p>
                            <ul>
                                <li>ÿπÿßÿØÿ™‚ÄåŸáÿß Ÿà ÿ±ŸàÿßŸÑ‚ÄåŸáÿß: <em>ŸÖŸÜ Ÿáÿ± ÿ±Ÿàÿ≤ ÿ≥ÿßÿπÿ™ 7 ÿµÿ®ÿ≠ ÿ®€åÿØÿßÿ± ŸÖ€å‚Äåÿ¥ŸàŸÖ.</em></li>
                                <li>ÿ≠ŸÇÿß€åŸÇ ⁄©ŸÑ€å: <em>ÿÆŸàÿ±ÿ¥€åÿØ ÿßÿ≤ ÿ¥ÿ±ŸÇ ÿ∑ŸÑŸàÿπ ŸÖ€å‚Äå⁄©ŸÜÿØ.</em></li>
                                <li>ŸÖŸàŸÇÿπ€åÿ™‚ÄåŸáÿß€å ÿØÿßÿ¶ŸÖ€å: <em>ÿßŸà ÿØÿ± ÿ®ÿßŸÜ⁄© ⁄©ÿßÿ± ŸÖ€å‚Äå⁄©ŸÜÿØ.</em></li>
                            </ul>
                            
                            <h4>ÿ≥ÿßÿÆÿ™ÿßÿ±:</h4>
                            <p><strong>ŸÖÿ´ÿ®ÿ™:</strong> ŸÅÿßÿπŸÑ + ŸÅÿπŸÑ (ÿ®ÿ±ÿß€å he/she/it ÿ≠ÿ±ŸÅ 's' ÿßÿ∂ÿßŸÅŸá ŸÖ€å‚Äåÿ¥ŸàÿØ)</p>
                            <p><strong>ŸÖŸÜŸÅ€å:</strong> ŸÅÿßÿπŸÑ + do/does + not + ŸÅÿπŸÑ</p>
                            <p><strong>ÿ≥ŸàÿßŸÑ€å:</strong> Do/Does + ŸÅÿßÿπŸÑ + ŸÅÿπŸÑ</p>
                            
                            <div class="example-box">
                                <h4>ŸÖÿ´ÿßŸÑ‚ÄåŸáÿß:</h4>
                                <p>‚úÖ <strong>ÿµÿ≠€åÿ≠:</strong> ÿßŸà Ÿáÿ± ÿ¢ÿÆÿ± ŸáŸÅÿ™Ÿá ŸÅŸàÿ™ÿ®ÿßŸÑ ÿ®ÿßÿ≤€å ŸÖ€å‚Äå⁄©ŸÜÿØ.</p>
                                <p>‚úÖ <strong>ÿµÿ≠€åÿ≠:</strong> ÿ¢ŸÜŸáÿß ŸÇŸáŸàŸá ÿØŸàÿ≥ÿ™ ŸÜÿØÿßÿ±ŸÜÿØ.</p>
                                <p>‚ùå <strong>ÿ∫ŸÑÿ∑:</strong> ÿßŸà Ÿáÿ± ÿ¢ÿÆÿ± ŸáŸÅÿ™Ÿá ŸÅŸàÿ™ÿ®ÿßŸÑ ÿ®ÿßÿ≤€å ŸÖ€å‚Äå⁄©ŸÜŸÜÿØ.</p>
                            </div>
                        `,
                        examples: [
                            "ŸÖŸÜ Ÿáÿ± ÿ±Ÿàÿ≤ ÿßŸÜ⁄ØŸÑ€åÿ≥€å ŸÖÿ∑ÿßŸÑÿπŸá ŸÖ€å‚Äå⁄©ŸÜŸÖ.",
                            "ÿßŸà ⁄ØŸàÿ¥ÿ™ ŸÜŸÖ€å‚ÄåÿÆŸàÿ±ÿØ.",
                            "ÿ¢€åÿß ÿ¥ŸÖÿß ÿØÿ± ŸÑŸÜÿØŸÜ ÿ≤ŸÜÿØ⁄Ø€å ŸÖ€å‚Äå⁄©ŸÜ€åÿØÿü"
                        ],
                        time: "15 ÿØŸÇ€åŸÇŸá",
                        difficulty: "ŸÖÿ®ÿ™ÿØ€å"
                    }
                    // More Persian lessons would continue here...
                ],
                intermediate: [
                    // Persian intermediate lessons
                ],
                advanced: [
                    // Persian advanced lessons
                ]
            }
        };

        // Quiz Questions for each lesson
        const quizData = {
            basic: [
                {
                    lessonId: 1,
                    questions: [
                        {
                            question: "Which sentence is correct?",
                            options: [
                                "He play football every day.",
                                "He plays football every day.",
                                "He playing football every day.",
                                "He is play football every day."
                            ],
                            correct: 1,
                            explanation: "For he/she/it, we add 's' to the verb: He plays."
                        },
                        {
                            question: "Choose the correct negative form:",
                            options: [
                                "She don't like coffee.",
                                "She doesn't likes coffee.",
                                "She doesn't like coffee.",
                                "She not like coffee."
                            ],
                            correct: 2,
                            explanation: "For she/he/it, use 'doesn't' + base verb: doesn't like."
                        }
                    ]
                }
            ],
            intermediate: [
                // Intermediate quizzes
            ],
            advanced: [
                // Advanced quizzes
            ]
        };

        // Current state
        let currentLanguage = 'en';
        let currentLevel = null;
        let currentLesson = null;
        let userProgress = {
            basic: { completed: [], scores: {} },
            intermediate: { completed: [], scores: {} },
            advanced: { completed: [], scores: {} }
        };

        // Language Management
        const translations = {
            en: {
                // Navigation
                home: "Home",
                grammar: "Grammar",
                vocabulary: "Vocabulary",
                pronunciation: "Pronunciation",
                voiceCheck: "Voice Check",
                placementTests: "Placement Tests",
                ielts: "IELTS",
                toefl: "TOEFL",
                
                // Level Selection
                levelTitle: "Choose Your Grammar Level",
                levelSubtitle: "Select the level that matches your current English proficiency",
                
                // Basic Level
                basicTitle: "Basic",
                basicDesc: "For beginners starting their English journey",
                basicFeatures: [
                    "Simple present & past tenses",
                    "Basic sentence structure",
                    "Everyday conversations",
                    "Essential grammar rules",
                    "Beginner vocabulary"
                ],
                basicBtn: "Start Basic Level",
                
                // Intermediate Level
                intermediateTitle: "Intermediate",
                intermediateDesc: "For learners with basic understanding",
                intermediateFeatures: [
                    "All verb tenses",
                    "Conditional sentences",
                    "Reported speech",
                    "Complex sentences",
                    "Idiomatic expressions"
                ],
                intermediateBtn: "Start Intermediate Level",
                
                // Advanced Level
                advancedTitle: "Advanced",
                advancedDesc: "For IELTS/TOEFL preparation and fluency",
                advancedFeatures: [
                    "Advanced grammar structures",
                    "Academic writing",
                    "Formal speech patterns",
                    "Exam strategies",
                    "Native-level proficiency"
                ],
                advancedBtn: "Start Advanced Level",
                
                // Progress
                progressTitle: "Your Progress",
                progressText: "{percent}% Complete ‚Ä¢ {completed}/{total} Lessons",
                
                // Footer
                footerDescription: "Your journey to English fluency starts here. Join our community of successful learners today!",
                footerLinksTitle: "Quick Links",
                footerCategoriesTitle: "Categories",
                footerContactTitle: "Contact Us",
                copyrightText: "¬© 2023 English by Neo. All rights reserved.",
                
                // Quiz
                quizTitle: "Grammar Quiz",
                quizSubtitle: "Test your understanding of the lesson",
                previous: "Previous",
                next: "Next Question",
                submit: "Submit Quiz",
                correct: "Correct!",
                incorrect: "Incorrect!",
                score: "Your Score: {score}/{total}",
                tryAgain: "Try Again",
                continue: "Continue Learning"
            },
            
            fa: {
                // Navigation
                home: "ÿÆÿßŸÜŸá",
                grammar: "⁄Øÿ±ÿßŸÖÿ±",
                vocabulary: "Ÿàÿß⁄ò⁄ØÿßŸÜ",
                pronunciation: "ÿ™ŸÑŸÅÿ∏",
                voiceCheck: "ÿ®ÿ±ÿ±ÿ≥€å ÿµÿØÿß",
                placementTests: "ÿ¢ÿ≤ŸÖŸàŸÜ ÿ™ÿπ€å€åŸÜ ÿ≥ÿ∑ÿ≠",
                ielts: "ÿ¢€åŸÑÿ™ÿ≥",
                toefl: "ÿ™ÿßŸÅŸÑ",
                
                // Level Selection
                levelTitle: "ÿ≥ÿ∑ÿ≠ ⁄Øÿ±ÿßŸÖÿ±€å ÿÆŸàÿØ ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ",
                levelSubtitle: "ÿ≥ÿ∑ÿ≠€å ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ ⁄©Ÿá ÿ®ÿß ŸÖŸáÿßÿ±ÿ™ ŸÅÿπŸÑ€å ÿßŸÜ⁄ØŸÑ€åÿ≥€å ÿ¥ŸÖÿß ŸÖÿ∑ÿßÿ®ŸÇÿ™ ÿØÿßÿ±ÿØ",
                
                // Basic Level
                basicTitle: "ŸÖÿ®ÿ™ÿØ€å",
                basicDesc: "ÿ®ÿ±ÿß€å ŸÖÿ®ÿ™ÿØ€åÿßŸÜ€å ⁄©Ÿá ÿ≥ŸÅÿ± ÿßŸÜ⁄ØŸÑ€åÿ≥€å ÿÆŸàÿØ ÿ±ÿß ÿ¥ÿ±Ÿàÿπ ŸÖ€å‚Äå⁄©ŸÜŸÜÿØ",
                basicFeatures: [
                    "ÿ≤ŸÖÿßŸÜ‚ÄåŸáÿß€å ÿ≠ÿßŸÑ Ÿà ⁄Øÿ∞ÿ¥ÿ™Ÿá ÿ≥ÿßÿØŸá",
                    "ÿ≥ÿßÿÆÿ™ÿßÿ± ÿ¨ŸÖŸÑŸá‚Äåÿß€å Ÿæÿß€åŸá",
                    "ŸÖ⁄©ÿßŸÑŸÖÿßÿ™ ÿ±Ÿàÿ≤ŸÖÿ±Ÿá",
                    "ŸÇŸàÿßÿπÿØ ⁄Øÿ±ÿßŸÖÿ±€å ÿ∂ÿ±Ÿàÿ±€å",
                    "Ÿàÿß⁄ò⁄ØÿßŸÜ ŸÖÿ®ÿ™ÿØ€å"
                ],
                basicBtn: "ÿ¥ÿ±Ÿàÿπ ÿ≥ÿ∑ÿ≠ ŸÖÿ®ÿ™ÿØ€å",
                
                // Intermediate Level
                intermediateTitle: "ŸÖÿ™Ÿàÿ≥ÿ∑",
                intermediateDesc: "ÿ®ÿ±ÿß€å ÿ≤ÿ®ÿßŸÜ‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ ÿ®ÿß ÿØÿ±⁄© Ÿæÿß€åŸá",
                intermediateFeatures: [
                    "ÿ™ŸÖÿßŸÖ€å ÿ≤ŸÖÿßŸÜ‚ÄåŸáÿß€å ŸÅÿπŸÑ",
                    "ÿ¨ŸÖŸÑÿßÿ™ ÿ¥ÿ±ÿ∑€å",
                    "⁄ØŸÅÿ™ÿßÿ± ŸÜŸÇŸÑ ŸÇŸàŸÑ ÿ¥ÿØŸá",
                    "ÿ¨ŸÖŸÑÿßÿ™ Ÿæ€å⁄Ü€åÿØŸá",
                    "ÿßÿµÿ∑ŸÑÿßÿ≠ÿßÿ™ ÿ≤ÿ®ÿßŸÜ"
                ],
                intermediateBtn: "ÿ¥ÿ±Ÿàÿπ ÿ≥ÿ∑ÿ≠ ŸÖÿ™Ÿàÿ≥ÿ∑",
                
                // Advanced Level
                advancedTitle: "Ÿæ€åÿ¥ÿ±ŸÅÿ™Ÿá",
                advancedDesc: "ÿ®ÿ±ÿß€å ÿ¢ŸÖÿßÿØ⁄Ø€å ÿ¢€åŸÑÿ™ÿ≥/ÿ™ÿßŸÅŸÑ Ÿà ÿ±ŸàÿßŸÜ€å ÿ≤ÿ®ÿßŸÜ",
                advancedFeatures: [
                    "ÿ≥ÿßÿÆÿ™ÿßÿ±Ÿáÿß€å ⁄Øÿ±ÿßŸÖÿ±€å Ÿæ€åÿ¥ÿ±ŸÅÿ™Ÿá",
                    "ŸÜ⁄Øÿßÿ±ÿ¥ ÿ¢⁄©ÿßÿØŸÖ€å⁄©",
                    "ÿßŸÑ⁄ØŸàŸáÿß€å ⁄ØŸÅÿ™ÿßÿ± ÿ±ÿ≥ŸÖ€å",
                    "ÿßÿ≥ÿ™ÿ±ÿßÿ™⁄ò€å‚ÄåŸáÿß€å ÿ¢ÿ≤ŸÖŸàŸÜ",
                    "ŸÖŸáÿßÿ±ÿ™ ÿ≥ÿ∑ÿ≠ ÿ®ŸàŸÖ€å"
                ],
                advancedBtn: "ÿ¥ÿ±Ÿàÿπ ÿ≥ÿ∑ÿ≠ Ÿæ€åÿ¥ÿ±ŸÅÿ™Ÿá",
                
                // Progress
                progressTitle: "Ÿæ€åÿ¥ÿ±ŸÅÿ™ ÿ¥ŸÖÿß",
                progressText: "{percent}% ÿ™⁄©ŸÖ€åŸÑ ÿ¥ÿØŸá ‚Ä¢ {completed}/{total} ÿØÿ±ÿ≥",
                
                // Footer
                footerDescription: "ÿ≥ŸÅÿ± ÿ¥ŸÖÿß ÿ®Ÿá ÿ™ÿ≥ŸÑÿ∑ ÿßŸÜ⁄ØŸÑ€åÿ≥€å ÿßÿ≤ ÿß€åŸÜÿ¨ÿß ÿ¥ÿ±Ÿàÿπ ŸÖ€å‚Äåÿ¥ŸàÿØ. ÿßŸÖÿ±Ÿàÿ≤ ÿ®Ÿá ÿ¨ÿßŸÖÿπŸá ÿ≤ÿ®ÿßŸÜ‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ ŸÖŸàŸÅŸÇ ŸÖÿß ÿ®Ÿæ€åŸàŸÜÿØ€åÿØ!",
                footerLinksTitle: "ŸÑ€åŸÜ⁄©‚ÄåŸáÿß€å ÿ≥ÿ±€åÿπ",
                footerCategoriesTitle: "ÿØÿ≥ÿ™Ÿá‚Äåÿ®ŸÜÿØ€å‚ÄåŸáÿß",
                footerContactTitle: "ÿ™ŸÖÿßÿ≥ ÿ®ÿß ŸÖÿß",
                copyrightText: "¬© €≤€∞€≤€≥ ÿßŸÜ⁄ØŸÑ€åÿ≥€å ÿ®ÿß ŸÜÿ¶Ÿà. ⁄©ŸÑ€åŸá ÿ≠ŸÇŸàŸÇ ŸÖÿ≠ŸÅŸàÿ∏ ÿßÿ≥ÿ™.",
                
                // Quiz
                quizTitle: "⁄©Ÿà€å€åÿ≤ ⁄Øÿ±ÿßŸÖÿ±",
                quizSubtitle: "ÿØÿ±⁄© ÿÆŸàÿØ ÿßÿ≤ ÿØÿ±ÿ≥ ÿ±ÿß ÿ¢ÿ≤ŸÖÿß€åÿ¥ ⁄©ŸÜ€åÿØ",
                previous: "ŸÇÿ®ŸÑ€å",
                next: "ÿ≥ŸàÿßŸÑ ÿ®ÿπÿØ€å",
                submit: "ÿßÿ±ÿ≥ÿßŸÑ ⁄©Ÿà€å€åÿ≤",
                correct: "ÿµÿ≠€åÿ≠!",
                incorrect: "ÿ∫ŸÑÿ∑!",
                score: "ÿßŸÖÿ™€åÿßÿ≤ ÿ¥ŸÖÿß: {score}/{total}",
                tryAgain: "ÿØŸàÿ®ÿßÿ±Ÿá ÿ™ŸÑÿßÿ¥ ⁄©ŸÜ€åÿØ",
                continue: "ÿßÿØÿßŸÖŸá €åÿßÿØ⁄Ø€åÿ±€å"
            }
        };

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            initLanguageSwitcher();
            loadUserProgress();
            setupEventListeners();
            updateContent(currentLanguage);
        });

        // Language Switcher
        function initLanguageSwitcher() {
            const langButtons = document.querySelectorAll('.lang-btn');
            langButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const lang = btn.dataset.lang;
                    switchLanguage(lang);
                });
            });
        }

        function switchLanguage(lang) {
            currentLanguage = lang;
            document.body.dir = lang === 'fa' ? 'rtl' : 'ltr';
            
            // Update active button
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.lang === lang);
            });
            
            updateContent(lang);
        }

        function updateContent(lang) {
            const t = translations[lang];
            
            // Update navigation
            document.querySelectorAll('.nav-link').forEach((link, index) => {
                const pages = ['home', 'grammar', 'vocabulary', 'pronunciation', 'voiceCheck', 'placementTests', 'ielts', 'toefl'];
                if (t[pages[index]]) {
                    link.textContent = t[pages[index]];
                }
            });
            
            // Update level selection
            document.getElementById('level-title').textContent = t.levelTitle;
            document.getElementById('level-subtitle').textContent = t.levelSubtitle;
            
            // Update level cards
            document.getElementById('basic-title').textContent = t.basicTitle;
            document.getElementById('basic-desc').textContent = t.basicDesc;
            document.getElementById('basic-btn').textContent = t.basicBtn;
            
            document.getElementById('intermediate-title').textContent = t.intermediateTitle;
            document.getElementById('intermediate-desc').textContent = t.intermediateDesc;
            document.getElementById('intermediate-btn').textContent = t.intermediateBtn;
            
            document.getElementById('advanced-title').textContent = t.advancedTitle;
            document.getElementById('advanced-desc').textContent = t.advancedDesc;
            document.getElementById('advanced-btn').textContent = t.advancedBtn;
            
            // Update level features
            const basicFeatures = document.getElementById('basic-features');
            basicFeatures.innerHTML = t.basicFeatures.map(feature => `<li>${feature}</li>`).join('');
            
            const intermediateFeatures = document.getElementById('intermediate-features');
            intermediateFeatures.innerHTML = t.intermediateFeatures.map(feature => `<li>${feature}</li>`).join('');
            
            const advancedFeatures = document.getElementById('advanced-features');
            advancedFeatures.innerHTML = t.advancedFeatures.map(feature => `<li>${feature}</li>`).join('');
            
            // Update footer
            document.getElementById('footer-description').textContent = t.footerDescription;
            document.getElementById('footer-links-title').textContent = t.footerLinksTitle;
            document.getElementById('footer-categories-title').textContent = t.footerCategoriesTitle;
            document.getElementById('footer-contact-title').textContent = t.footerContactTitle;
            document.getElementById('copyright-text').textContent = t.copyrightText;
            
            // Update lesson content if a level is selected
            if (currentLevel) {
                updateLessonContent(currentLevel);
            }
        }

        function setupEventListeners() {
            // Level selection
            document.querySelectorAll('.level-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.preventDefault();
                    const level = btn.dataset.level;
                    showLevelContent(level);
                });
            });
            
            // Back to levels
            document.querySelectorAll('.back-to-levels').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.preventDefault();
                    showLevelSelection();
                });
            });
            
            // Quiz navigation
            document.getElementById('prev-question').addEventListener('click', prevQuestion);
            document.getElementById('next-question').addEventListener('click', nextQuestion);
            document.getElementById('submit-quiz').addEventListener('click', submitQuiz);
        }

        function showLevelContent(level) {
            currentLevel = level;
            
            // Hide level selection and other content
            document.getElementById('levelSelection').style.display = 'none';
            document.querySelectorAll('.lesson-content').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById('quizSection').classList.remove('active');
            
            // Show selected level content
            const levelSection = document.getElementById(level + 'Lessons');
            levelSection.classList.add('active');
            
            // Update level content
            updateLessonContent(level);
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        function showLevelSelection() {
            currentLevel = null;
            currentLesson = null;
            
            // Show level selection
            document.getElementById('levelSelection').style.display = 'block';
            
            // Hide all lesson content and quiz
            document.querySelectorAll('.lesson-content').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById('quizSection').classList.remove('active');
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        function updateLessonContent(level) {
            const t = translations[currentLanguage];
            const lessons = grammarData[currentLanguage][level];
            
            // Update level title
            const levelTitle = document.getElementById(`${level}-level-title`);
            const levelDesc = document.getElementById(`${level}-level-desc`);
            
            if (level === 'basic') {
                levelTitle.textContent = `${t.basicTitle} Grammar Level`;
                levelDesc.textContent = 'Master essential grammar for everyday communication';
            } else if (level === 'intermediate') {
                levelTitle.textContent = `${t.intermediateTitle} Grammar Level`;
                levelDesc.textContent = 'Build complex sentences and express detailed thoughts';
            } else {
                levelTitle.textContent = `${t.advancedTitle} Grammar Level`;
                levelDesc.textContent = 'Achieve native-like fluency and academic excellence';
            }
            
            // Update progress
            updateProgress(level);
            
            // Load lessons
            const lessonsGrid = document.getElementById(`${level}-lessons-grid`);
            lessonsGrid.innerHTML = '';
            
            if (lessons && lessons.length > 0) {
                lessons.forEach(lesson => {
                    const isCompleted = userProgress[level].completed.includes(lesson.id);
                    const lessonCard = document.createElement('div');
                    lessonCard.className = 'lesson-card';
                    lessonCard.innerHTML = `
                        <span class="lesson-number">Lesson ${lesson.id}</span>
                        <h3>${lesson.title}</h3>
                        <p>${lesson.description}</p>
                        <div class="lesson-stats">
                            <span class="lesson-time">‚è±Ô∏è ${lesson.time}</span>
                            <span class="difficulty ${lesson.difficulty}">${lesson.difficulty}</span>
                        </div>
                        ${isCompleted ? 
                            `<span class="start-lesson-btn" style="background: var(--accent-green); border-color: var(--accent-green);">
                                ‚úì Completed
                            </span>` :
                            `<a href="#" class="start-lesson-btn" data-lesson-id="${lesson.id}">
                                Start Lesson
                            </a>`
                        }
                    `;
                    
                    // Add click event for lesson button
                    const lessonBtn = lessonCard.querySelector('.start-lesson-btn');
                    if (lessonBtn && !isCompleted) {
                        lessonBtn.addEventListener('click', (e) => {
                            e.preventDefault();
                            startLesson(level, lesson.id);
                        });
                    }
                    
                    lessonsGrid.appendChild(lessonCard);
                });
            }
        }

        function startLesson(level, lessonId) {
            currentLesson = { level, id: lessonId };
            
            // Create lesson modal
            const lesson = grammarData[currentLanguage][level].find(l => l.id === lessonId);
            if (lesson) {
                const modal = document.createElement('div');
                modal.className = 'lesson-modal';
                modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.8);
                    z-index: 10000;
                    overflow-y: auto;
                    padding: 20px;
                `;
                
                modal.innerHTML = `
                    <div style="
                        max-width: 800px;
                        margin: 50px auto;
                        background: white;
                        border-radius: 20px;
                        padding: 40px;
                        position: relative;
                    ">
                        <button class="close-modal" style="
                            position: absolute;
                            top: 20px;
                            right: 20px;
                            background: none;
                            border: none;
                            font-size: 24px;
                            cursor: pointer;
                            color: var(--text-light);
                        ">√ó</button>
                        
                        <h2 style="color: var(--primary-blue); margin-bottom: 20px;">${lesson.title}</h2>
                        
                        <div style="margin: 30px 0;">
                            ${lesson.content}
                        </div>
                        
                        <div class="examples" style="
                            background: var(--light-blue);
                            padding: 25px;
                            border-radius: 15px;
                            margin: 30px 0;
                        ">
                            <h4 style="margin-bottom: 15px;">${currentLanguage === 'en' ? 'Practice Examples:' : 'ŸÖÿ´ÿßŸÑ‚ÄåŸáÿß€å ÿ™ŸÖÿ±€åŸÜ€å:'}</h4>
                            <ul style="list-style: none;">
                                ${lesson.examples.map(example => `
                                    <li style="padding: 10px 0; border-bottom: 1px solid rgba(0,0,0,0.1);">
                                        <i class="fas fa-check" style="color: var(--accent-green); margin-right: 10px;"></i>
                                        ${example}
                                    </li>
                                `).join('')}
                            </ul>
                        </div>
                        
                        <div style="display: flex; gap: 20px; margin-top: 40px;">
                            <button class="take-quiz-btn" style="
                                padding: 15px 30px;
                                background: var(--primary-blue);
                                color: white;
                                border: none;
                                border-radius: 25px;
                                cursor: pointer;
                                font-weight: 600;
                                flex: 1;
                            ">
                                ${currentLanguage === 'en' ? 'Take Quiz' : 'ÿ¥ÿ±⁄©ÿ™ ÿØÿ± ⁄©Ÿà€å€åÿ≤'}
                            </button>
                            
                            <button class="complete-lesson-btn" style="
                                padding: 15px 30px;
                                background: var(--accent-green);
                                color: white;
                                border: none;
                                border-radius: 25px;
                                cursor: pointer;
                                font-weight: 600;
                                flex: 1;
                            ">
                                ${currentLanguage === 'en' ? 'Mark as Complete' : 'ÿπŸÑÿßŸÖÿ™‚Äå⁄Øÿ∞ÿßÿ±€å ÿ®Ÿá ÿπŸÜŸàÿßŸÜ ÿ™⁄©ŸÖ€åŸÑ ÿ¥ÿØŸá'}
                            </button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
                
                // Add event listeners
                modal.querySelector('.close-modal').addEventListener('click', () => {
                    document.body.removeChild(modal);
                });
                
                modal.querySelector('.take-quiz-btn').addEventListener('click', () => {
                    document.body.removeChild(modal);
                    startQuiz(level, lessonId);
                });
                
                modal.querySelector('.complete-lesson-btn').addEventListener('click', () => {
                    completeLesson(level, lessonId);
                    document.body.removeChild(modal);
                    updateLessonContent(level);
                });
            }
        }

        function startQuiz(level, lessonId) {
            currentLesson = { level, id: lessonId };
            
            // Hide current content
            document.querySelector('.lesson-content.active').classList.remove('active');
            
            // Show quiz section
            document.getElementById('quizSection').classList.add('active');
            
            // Load quiz questions
            loadQuizQuestions(level, lessonId);
        }

        function loadQuizQuestions(level, lessonId) {
            const t = translations[currentLanguage];
            const quizContent = document.getElementById('quiz-content');
            
            // For now, use sample questions - in real implementation, you'd fetch from quizData
            const questions = [
                {
                    question: "Which sentence uses present simple correctly?",
                    options: [
                        "He go to school every day.",
                        "He goes to school every day.",
                        "He is go to school every day.",
                        "He going to school every day."
                    ],
                    correct: 1,
                    explanation: "For he/she/it, add 's' to the verb: goes."
                },
                {
                    question: "Choose the correct negative form:",
                    options: [
                        "She don't like tea.",
                        "She doesn't likes tea.",
                        "She doesn't like tea.",
                        "She not like tea."
                    ],
                    correct: 2,
                    explanation: "Use 'doesn't' + base verb for she/he/it."
                }
            ];
            
            let currentQuestion = 0;
            let userAnswers = [];
            
            function displayQuestion(index) {
                const q = questions[index];
                quizContent.innerHTML = `
                    <div class="quiz-question">
                        <h3>${q.question}</h3>
                    </div>
                    <div class="quiz-options">
                        ${q.options.map((option, i) => `
                            <div class="quiz-option" data-index="${i}">
                                ${option}
                            </div>
                        `).join('')}
                    </div>
                    <div class="quiz-feedback" id="feedback"></div>
                `;
                
                // Update question counter
                document.getElementById('question-counter').textContent = 
                    `${currentLanguage === 'en' ? 'Question' : 'ÿ≥ŸàÿßŸÑ'} ${index + 1} ${currentLanguage === 'en' ? 'of' : 'ÿßÿ≤'} ${questions.length}`;
                
                // Setup option selection
                document.querySelectorAll('.quiz-option').forEach(option => {
                    option.addEventListener('click', function() {
                        const selectedIndex = parseInt(this.dataset.index);
                        
                        // Clear previous selections
                        document.querySelectorAll('.quiz-option').forEach(opt => {
                            opt.classList.remove('selected');
                        });
                        
                        // Select current option
                        this.classList.add('selected');
                        
                        // Store answer
                        userAnswers[index] = selectedIndex;
                        
                        // Show feedback
                        const feedback = document.getElementById('feedback');
                        if (selectedIndex === q.correct) {
                            feedback.innerHTML = `<div style="color: var(--accent-green);">${t.correct} ${q.explanation}</div>`;
                        } else {
                            feedback.innerHTML = `<div style="color: #f44336;">${t.incorrect} ${q.explanation}</div>`;
                        }
                        feedback.classList.add('active');
                        
                        // Enable next button
                        document.getElementById('next-question').disabled = false;
                        if (index === questions.length - 1) {
                            document.getElementById('submit-quiz').style.display = 'block';
                            document.getElementById('next-question').style.display = 'none';
                        }
                    });
                });
                
                // Restore previous answer if exists
                if (userAnswers[index] !== undefined) {
                    document.querySelectorAll('.quiz-option')[userAnswers[index]].classList.add('selected');
                }
            }
            
            // Initial display
            displayQuestion(currentQuestion);
            
            // Update navigation buttons
            document.getElementById('prev-question').disabled = currentQuestion === 0;
            document.getElementById('next-question').disabled = true;
            document.getElementById('submit-quiz').style.display = 'none';
            
            // Store functions for navigation
            window.nextQuestion = function() {
                if (currentQuestion < questions.length - 1) {
                    currentQuestion++;
                    displayQuestion(currentQuestion);
                    document.getElementById('prev-question').disabled = false;
                    document.getElementById('next-question').disabled = true;
                }
            };
            
            window.prevQuestion = function() {
                if (currentQuestion > 0) {
                    currentQuestion--;
                    displayQuestion(currentQuestion);
                    document.getElementById('prev-question').disabled = currentQuestion === 0;
                    document.getElementById('next-question').disabled = false;
                }
            };
            
            window.submitQuiz = function() {
                const score = questions.reduce((total, q, index) => {
                    return total + (userAnswers[index] === q.correct ? 1 : 0);
                }, 0);
                
                quizContent.innerHTML = `
                    <div style="text-align: center; padding: 40px;">
                        <div style="font-size: 48px; color: var(--accent-green); margin-bottom: 20px;">
                            ${score >= questions.length / 2 ? 'üéâ' : 'üìö'}
                        </div>
                        <h3>${t.score.replace('{score}', score).replace('{total}', questions.length)}</h3>
                        <p style="margin: 20px 0;">${score >= questions.length / 2 ? 
                            (currentLanguage === 'en' ? 'Great job! You understand this topic well.' : 'ÿ¢ŸÅÿ±€åŸÜ! ÿ¥ŸÖÿß ÿß€åŸÜ ŸÖŸàÿ∂Ÿàÿπ ÿ±ÿß ÿ®Ÿá ÿÆŸàÿ®€å ÿØÿ±⁄© ⁄©ÿ±ÿØŸá‚Äåÿß€åÿØ.') :
                            (currentLanguage === 'en' ? 'Review the lesson and try again!' : 'ÿØÿ±ÿ≥ ÿ±ÿß ŸÖÿ±Ÿàÿ± ⁄©ŸÜ€åÿØ Ÿà ÿØŸàÿ®ÿßÿ±Ÿá ÿ™ŸÑÿßÿ¥ ⁄©ŸÜ€åÿØ!')
                        }</p>
                        <div style="display: flex; gap: 20px; justify-content: center; margin-top: 30px;">
                            <button id="try-again-btn" class="quiz-btn">
                                ${t.tryAgain}
                            </button>
                            <button id="continue-btn" class="quiz-btn" style="background: var(--accent-green);">
                                ${t.continue}
                            </button>
                        </div>
                    </div>
                `;
                
                // Store quiz score
                if (!userProgress[currentLesson.level].scores) {
                    userProgress[currentLesson.level].scores = {};
                }
                userProgress[currentLesson.level].scores[currentLesson.id] = score;
                saveUserProgress();
                
                // Add event listeners to result buttons
                document.getElementById('try-again-btn').addEventListener('click', () => {
                    loadQuizQuestions(level, lessonId);
                });
                
                document.getElementById('continue-btn').addEventListener('click', () => {
                    completeLesson(level, lessonId);
                    showLevelContent(level);
                });
            };
        }

        function completeLesson(level, lessonId) {
            if (!userProgress[level].completed.includes(lessonId)) {
                userProgress[level].completed.push(lessonId);
                saveUserProgress();
                updateProgress(level);
            }
        }

        function updateProgress(level) {
            const t = translations[currentLanguage];
            const totalLessons = grammarData[currentLanguage][level].length;
            const completed = userProgress[level].completed.length;
            const percent = Math.round((completed / totalLessons) * 100);
            
            // Update progress bar
            const progressBar = document.getElementById(`${level}-progress`);
            if (progressBar) {
                progressBar.style.width = `${percent}%`;
            }
            
            // Update progress text
            const progressText = document.getElementById(`progress-${level}-text`);
            if (progressText) {
                progressText.textContent = t.progressText
                    .replace('{percent}', percent)
                    .replace('{completed}', completed)
                    .replace('{total}', totalLessons);
            }
        }

        function loadUserProgress() {
            const saved = localStorage.getItem('englishByNeoProgress');
            if (saved) {
                userProgress = JSON.parse(saved);
            }
        }

        function saveUserProgress() {
            localStorage.setItem('englishByNeoProgress', JSON.stringify(userProgress));
        }
    </script>
</body>
</html>